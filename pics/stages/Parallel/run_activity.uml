@startuml

title Parallel run()

start
:**prepareContext**;
:**split** all;

fork
    :run **stage** for piece #1;
    if(error) then (handleError)
        if(**exHandler**)
        :logError;
        endif
    endif 
fork again
    :run **stage** for piece ...;
    if(error) then (handleError)
        if(**exHandler**)
        :logError;
        endif
    endif 
fork again
    :run **stage** for piece #n;
    if(error) then (handleError)
        if(**exHandler**)
        :logError;
        endif
    endif 
end fork

if(has errors) 
    :done(errors);
else
    :**combine**;
    :done();
endif
stop

@enduml