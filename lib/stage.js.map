{"version":3,"file":"stage.js","sourceRoot":"","sources":["../src/stage.ts"],"names":[],"mappings":"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"}