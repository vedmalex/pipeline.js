{"version":3,"file":"stage.js","sourceRoot":"","sources":["../src/stage.ts"],"names":[],"mappings":"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"}