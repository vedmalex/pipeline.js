{"version":3,"file":"stage.js","sourceRoot":"","sources":["../src/stage.ts"],"names":[],"mappings":"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"}