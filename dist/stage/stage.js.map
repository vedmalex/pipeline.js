{"version":3,"file":"stage.js","sourceRoot":"","sources":["../../src/stage/stage.ts"],"names":[],"mappings":"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"}